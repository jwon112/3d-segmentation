# 포그라운드(Foreground) 정의

## BraTS 라벨 클래스

### 클래스 0: Background (배경)
- **의미**: 뇌 외부 영역
- **특징**: 두개골 밖, 공기, 배경 등
- **비율**: ~99% (8,870,695 / 8,928,000 = 99.36%)

### 클래스 1: NCR/NET (Necrotic Core / Non-enhancing Tumor Core)
- **의미**: 종양 내부 괴사 영역 / 비조영증강 종양 코어
- **특징**: 종양 내부의 죽은 세포 영역
- **비율**: ~0.13% (11,738 / 8,928,000)

### 클래스 2: ED (Peritumoral Edema)
- **의미**: 종양 주변 부종 영역
- **특징**: 종양 주변으로 퍼진 염증/부종
- **비율**: ~0.14% (12,836 / 8,928,000)

### 클래스 3: ET (Enhancing Tumor)
- **의미**: 조영증강 종양 영역
- **특징**: 조영제 주입 후 밝게 보이는 활성 종양 영역
- **비율**: ~0.37% (32,731 / 8,928,000)

## 포그라운드(Foreground)의 정의

### ✅ 포그라운드 = 종양 관련 라벨 마스크

**포그라운드는 다음을 의미합니다:**
- **클래스 1, 2, 3** (종양 관련 라벨)
- 즉, **배경(클래스 0)을 제외한 라벨 마스크의 모든 부분**
- 종양과 관련된 모든 영역 (괴사, 부종, 활성 종양)

### ❌ 포그라운드 ≠ 뇌 전체

**포그라운드는 다음을 의미하지 않습니다:**
- ❌ 뇌 전체 (정상 뇌 조직 포함)
- ❌ 배경을 제외한 모든 뇌 조직

**이유:**
- BraTS는 **종양 세그멘테이션 데이터셋**입니다
- 정상 뇌 조직은 별도로 라벨링되지 않습니다
- 라벨링된 것은:
  - 배경 (클래스 0)
  - 종양 관련 영역 (클래스 1, 2, 3)

## 데이터 구조

```
전체 볼륨 (240 x 240 x 155)
├── 배경 (클래스 0)          ← ~99%
│   ├── 뇌 외부 (두개골 밖)
│   └── 공기/배경
│
└── 포그라운드 (클래스 1,2,3) ← ~1%
    ├── 클래스 1: NCR/NET (괴사 영역)
    ├── 클래스 2: ED (부종 영역)
    └── 클래스 3: ET (활성 종양 영역)
```

## 코드에서의 사용

### Dice 계산
```python
# 배경 제외 평균 Dice = 포그라운드 Dice 평균
mean_dice_fg = dice_scores[1:].mean()  # 클래스 1, 2, 3의 평균
```

### 클래스 불균형
- **배경**: 99%
- **포그라운드**: 1% (클래스 1 + 2 + 3)
- 따라서 모델이 배경만 예측하면 99% 정확도 달성 가능
- 하지만 포그라운드 Dice = 0이 되어 의미 없는 모델

## 요약

**포그라운드 = 라벨 마스크에서 배경이 아닌 부분 = 종양 관련 라벨 (클래스 1, 2, 3)**

